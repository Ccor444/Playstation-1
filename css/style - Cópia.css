/* ============================================================
   CSS COMPLETO ATUALIZADO — Compatível com seu HTML & Bootstrap
   Mantém classes/IDs existentes. Corrige modal e z-index.
   ============================================================ */

/* --------------------------
   Variáveis / Tema
   -------------------------- */
:root{
  --bg-1: #05070a;
  --bg-2: #0b1220;
  --glass-bg: rgba(255,255,255,0.06);
  --glass-stroke: rgba(255,255,255,0.12);
  --accent: #00eaff;
  --accent2: #7a00ff;
  --accent-soft: rgba(0,234,255,0.14);
  --text-light: #e8f7ff;
  --muted: #9fb0c6;
  --blur: blur(18px);
  --shadow-lg: 0 10px 30px rgba(0,0,0,0.55);
  --safe-area: env(safe-area-inset-bottom, 0px);
}

/* --------------------------
   Base & Layout da página
   -------------------------- */
* { box-sizing: border-box; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
html,body{
  height:100%;
  margin:0;
  background: radial-gradient(circle at 10% 10%, rgba(10,18,28,0.6), rgba(0,0,0,1));
  color:var(--text-light);
  font-family: "Inter", "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
  -webkit-tap-highlight-color: transparent;
  padding-bottom: var(--safe-area);
}

/* Canvas principal (mantém pixelated para jogos) */
#display{
  display:block;
  width:95vw;
  max-height:92vh;
  margin: 0 auto;
  background: #000;
  image-rendering: pixelated;
  border-radius:12px;
  border: 1px solid rgba(255,255,255,0.03);
  box-shadow: 0 6px 40px rgba(0,0,0,0.8), 0 0 30px rgba(0,234,255,0.035);
  position: relative;
  z-index: 1;
}

/* --------------------------
   GitHub corner (mantém)
   -------------------------- */
#githubCornerLink{
  position: fixed;
  top: 18px;
  left: 18px;
  z-index: 11000;
  background: rgba(0,0,0,0.5);
  padding: 7px 12px;
  border-radius: 12px;
  color:#fff;
  border:1px solid rgba(255,255,255,0.04);
  text-decoration:none;
  display:flex;
  align-items:center;
  gap:8px;
  backdrop-filter: var(--blur);
  transition: transform .18s ease, box-shadow .18s ease;
}
#githubCornerLink:hover{ transform: translateY(-2px); box-shadow: 0 8px 30px rgba(0,0,0,0.6); }

/* --------------------------
   System log (top-right toasts)
   -------------------------- */
#system-log{
  position: fixed;
  top: 12px;
  right: 12px;
  width:320px;
  max-height:160px;
  overflow: hidden;
  pointer-events: none;
  z-index: 12000;
}
#system-log p.log-message{
  margin:8px 0;
  padding:8px 12px;
  border-radius:8px;
  font-weight:600;
  font-size:13px;
  color:#fff;
  opacity:0;
  transform: translateY(-6px);
  transition: opacity .28s ease, transform .28s ease;
  pointer-events: auto;
}
#system-log p.log-message.show{ opacity:1; transform: translateY(0); }

/* --------------------------
   Settings button (top-right)
   -------------------------- */
#settingsButton{
  position:absolute;
  top:18px;
  right:18px;
  width:58px;
  height:58px;
  border-radius:14px;
  background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.03));
  border:1px solid rgba(255,255,255,0.06);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow: 0 6px 22px rgba(0,0,0,0.6);
  backdrop-filter: var(--blur);
  z-index: 10030; /* abaixo do modal, acima do display */
  cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease;
}
#settingsButton:hover{ transform: scale(1.08) rotate(2deg); box-shadow: 0 10px 34px rgba(0,0,0,0.65), 0 0 18px var(--accent-soft); }
#settingsButton img{ display:block; width:30px; height:auto; }

/* --------------------------
   VIRTUAL GAMEPAD (rodapé)
   -------------------------- */
/* Importante: z-index reduzido para não sobrepor modal */
#virtualGamepad{
  position: fixed;
  left:0;
  right:0;
  bottom:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
  padding: 18px 10px calc(18px + var(--safe-area));
  background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.86));
  z-index: 10010; /* < modal z-index */
  pointer-events: auto;
}

/* Shoulders (L1/L2 & R1/R2) */
.shoulders{
  width:100%;
  max-width:780px;
  display:flex;
  justify-content:space-between;
  padding:0 16px;
  gap:8px;
}
.left-shoulder, .right-shoulder{
  display:flex;
  gap:10px;
}
.btn-shoulder{
  width:72px;
  height:44px;
  border-radius:10px;
  background: var(--glass-bg);
  border:1px solid var(--glass-stroke);
  color:var(--text-light);
  font-weight:700;
  backdrop-filter: var(--blur);
  box-shadow: var(--shadow-lg);
  transition: transform .08s ease, background .12s ease;
}
.btn-shoulder:active{ transform: translateY(1px) scale(.98); background: linear-gradient(135deg,var(--accent),var(--accent2)); }

/* Main body layout */
.main-body{
  width:100%;
  max-width:820px;
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  padding: 0 14px;
  gap: 6px;
}

/* --------------------------
   D-PAD (grid) — compatível com seu HTML
   -------------------------- */
.dpad{
  display:grid;
  grid-template-areas:
    ". up ."
    "left . right"
    ". down .";
  gap:10px;
  align-items:center;
}
.dpad button{
  width:66px;
  height:66px;
  border-radius:14px;
  background: var(--glass-bg);
  border:1px solid var(--glass-stroke);
  backdrop-filter: var(--blur);
  box-shadow: inset 0 0 10px rgba(0,0,0,0.25), var(--shadow-lg);
  transition: transform .08s ease, box-shadow .12s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:6px;
}
.dpad button img{ width:40px; height:auto; opacity:.92; pointer-events:none; }
.dpad button:active{ transform: scale(.94); background: linear-gradient(135deg,var(--accent),var(--accent2)); box-shadow: 0 8px 30px rgba(0,0,0,0.6), 0 0 30px var(--accent-soft); }

/* --------------------------
   CENTER (start/select/analogs)
   -------------------------- */
.center{ display:flex; flex-direction:column; align-items:center; gap:12px; }
.system-buttons{ display:flex; gap:12px; }
.btn-system{
  width:84px;
  height:40px;
  border-radius:10px;
  background: var(--glass-bg);
  border:1px solid var(--glass-stroke);
  padding:6px 12px;
  font-weight:700;
  text-transform:uppercase;
  backdrop-filter: var(--blur);
}
.btn-system:active{ transform: scale(.96); background: linear-gradient(135deg,var(--accent),var(--accent2)); box-shadow: 0 10px 26px rgba(0,0,0,0.55); }

.analogs{ display:flex; gap:12px; }
.btn-analog{
  width:56px;
  height:56px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  background: var(--glass-bg);
  border:1px solid var(--glass-stroke);
  box-shadow: var(--shadow-lg);
}

/* --------------------------
   ACTION BUTTONS (triangle/circle/cross/square)
   =========================== */
/* Mantive a estrutura vertical segura para não quebrar estrutura original */
.actions{
  display:grid;
  grid-template-columns: repeat(2, auto);
  grid-auto-rows: auto;
  gap:10px;
  align-content:center;
  justify-content:center;
}
.actions button{
  width:68px;
  height:68px;
  border-radius:16px;
  background: var(--glass-bg);
  border:1px solid var(--glass-stroke);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:6px;
  transition: transform .08s ease, box-shadow .12s ease;
}
.actions button img{ width:40px; height:auto; opacity:.96; pointer-events:none; }
.actions button:active{
  transform: scale(.92);
  background: linear-gradient(135deg,var(--accent),var(--accent2));
  box-shadow: 0 0 28px var(--accent);
}

/* Cores de feedback (compatível) */
#triangle:active{ box-shadow: 0 0 32px #00a8ff; }
#circle:active{ box-shadow: 0 0 32px #ff003b; }
#cross:active{ box-shadow: 0 0 32px #00ff85; }
#square:active{ box-shadow: 0 0 32px #e100ff; }

/* --------------------------
   MODAL (BOOTSTRAP) — FORÇA COMPATIBILIDADE E Z-INDEX
   -------------------------- */
/* Coloque modal sempre acima do gamepad e settings */
.modal {
  z-index: 10150 !important; /* acima do virtualGamepad (10010) e settingsButton (10030) */
}

/* backdrop do Bootstrap */
.modal-backdrop {
  z-index: 10130 !important;
  background-color: rgba(0,0,0,0.55) !important;
}

/* Modal dialog centralizado com animação leve */
.modal-dialog {
  max-width: 720px;
  margin: 1.75rem auto;
}
.modal.fade .modal-dialog {
  transform: translateY(8px);
  transition: transform .28s cubic-bezier(.2,.9,.2,1), opacity .22s ease;
}
.modal.show .modal-dialog { transform: translateY(0); }

/* Modal content (glass) — mantém .modal-content usado no seu HTML */
.modal-content{
  background: linear-gradient(180deg, rgba(18,22,30,0.88), rgba(12,14,18,0.96));
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.06);
  color: var(--text-light);
  backdrop-filter: blur(20px) saturate(140%);
  box-shadow: 0 18px 60px rgba(0,0,0,0.7), 0 0 36px var(--accent-soft);
}

/* Força que inputs e botões dentro do modal fiquem acima do backdrop e do gamepad */
.modal-content * { position: relative; z-index: 10160; }

/* Botões do modal (classe que você usa: modal-btn) */
.modal-btn, #quality, #fullscreenBtn {
  display:block;
  width:100%;
  text-align:center;
  margin:10px 0;
  padding:12px 14px;
  border-radius:12px;
  background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.04));
  border:1px solid rgba(255,255,255,0.06);
  color:var(--text-light);
  font-weight:700;
  cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease;
}
.modal-btn:hover, #quality:hover, #fullscreenBtn:hover{
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.6), 0 0 20px var(--accent-soft);
}

/* style para custom-file-upload (upload de BIOS) */
.custom-file-upload{
  display:inline-block;
  padding:10px 16px;
  border-radius:10px;
  background: linear-gradient(135deg,var(--accent),var(--accent2));
  color:#fff;
  cursor:pointer;
  font-weight:700;
  border: none;
  box-shadow: 0 8px 30px rgba(0,0,0,0.6);
}
.custom-file-upload:hover{ opacity:.95; transform: translateY(-2px); }

/* biosNotification area */
#biosNotification{
  margin-top:8px;
  color:var(--muted);
  font-size:13px;
}

/* --------------------------
   Notificações BIOS / misc
   -------------------------- */
.bios-notification{ color:var(--muted); font-size:13px; margin-top:6px; }

/* --------------------------
   Animações e helpers
   -------------------------- */
@keyframes floaty{
  0%{ transform: translateY(0px); }
  50%{ transform: translateY(-6px); }
  100%{ transform: translateY(0px); }
}
.pulse-accent{ animation: floaty 4s ease-in-out infinite; }

/* --------------------------
   Responsivo
   -------------------------- */
@media (max-width: 900px){
  .btn-shoulder{ width:62px; height:40px; }
  .dpad button, .actions button{ width:56px; height:56px; border-radius:12px; }
  .btn-system{ width:72px; height:36px; font-size:13px; }
  #display{ width:98vw; max-height:86vh; }
}
@media (max-width: 576px){
  #githubCornerLink span{ display:none; }
  .shoulders{ padding: 0 10px; }
  .main-body{ padding: 0 8px; gap:8px; }
  .dpad{ gap:6px; }
  .actions{ gap:8px; grid-template-columns: repeat(2, auto); }
}

/* --------------------------
   Correções finas para evitar que o virtualGamepad capture cliques quando modal aberto
   -------------------------- */
/* Quando modal aberto, Bootstrap adiciona .modal-open no body => usamos para bloquear interatividade do gamepad */
body.modal-open #virtualGamepad{
  pointer-events: none;
  filter: blur(1px) brightness(.7);
  transition: all .18s ease;
}
